# æ¨¡å…·æ›²é¢ç²¾åº¦åˆ†æç³»ç»Ÿ - å¼€å‘æ–‡æ¡£

## ğŸ“š ç›®å½•
- [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ä»£ç ç»“æ„è¯¦è§£](#ä»£ç ç»“æ„è¯¦è§£)
- [æ ¸å¿ƒæ¨¡å—è¯´æ˜](#æ ¸å¿ƒæ¨¡å—è¯´æ˜)
- [ç•Œé¢ç»„ä»¶æ˜ å°„](#ç•Œé¢ç»„ä»¶æ˜ å°„)
- [æ•°æ®æµç¨‹](#æ•°æ®æµç¨‹)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
- [æ‰©å±•æŒ‡å—](#æ‰©å±•æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®èƒŒæ™¯
æ¨¡å…·æ›²é¢ç²¾åº¦åˆ†æç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº Python å’Œ PySide6 å¼€å‘çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œä¸“é—¨ç”¨äºæ¨¡æ‹Ÿç¡¬ä»¶æµ‹é‡è®¾å¤‡è¿›è¡Œå®æ—¶æ•°æ®é‡‡é›†ï¼Œå¹¶é€šè¿‡å¤šçº¿ç¨‹æ¶æ„å®ç°æµ‹é‡æ•°æ®ä¸ç†è®ºCADæ¨¡å‹çš„å¯¹æ¯”åˆ†æï¼Œè®¡ç®—å’Œå¯è§†åŒ–æ¨¡å…·è¡¨é¢ç²¾åº¦è¯¯å·®ã€‚

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **GUIæ¡†æ¶**: PySide6 (Qt for Python 6.6.0+)
- **å¤šçº¿ç¨‹**: QThread å®ç°ç¡¬ä»¶æ¨¡æ‹Ÿå’Œè¯¯å·®åˆ†æ
- **æ•°æ®å¤„ç†**: pandas + NumPy æ•°å€¼è®¡ç®—  
- **å¯è§†åŒ–**: matplotlib 3Dç»˜å›¾å’Œç»Ÿè®¡å›¾è¡¨
- **æ ·å¼ç³»ç»Ÿ**: Qt Style Sheets (QSS) ç°ä»£åŒ–ç•Œé¢
- **å¼€å‘æ¨¡å¼**: é¢å‘å¯¹è±¡ç¼–ç¨‹ + ä¿¡å·æ§½æ¨¡å¼
- **ç¯å¢ƒç®¡ç†**: conda è™šæ‹Ÿç¯å¢ƒ

### ç³»ç»Ÿç‰¹è‰²
- ğŸ§µ **çœŸæ­£çš„å¤šçº¿ç¨‹æ¶æ„**: HardwareSimulator + AnalysisWorker åŒçº¿ç¨‹å¹¶è¡Œ
- ğŸ“Š **å®æ—¶æ•°æ®å¤„ç†**: CSVæ–‡ä»¶ç›‘æ§ + å¢é‡æ•°æ®åˆ†æ
- ğŸ¯ **é«˜ç²¾åº¦è¯¯å·®æ¨¡æ‹Ÿ**: ä¸‰å±‚è¯¯å·®æ¨¡å‹ (ç³»ç»Ÿ+éšæœº+ä½ç½®)
- ğŸ—ºï¸ **åæ ‡ç³»ç»Ÿè½¬æ¢**: æŸ±åæ ‡ â†” ç¬›å¡å°”åæ ‡ç²¾ç¡®è½¬æ¢
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: O(1)ç†è®ºæ•°æ®æŸ¥æ‰¾ + ç¼“å­˜æœºåˆ¶
- å®Œæ•´çš„äº¤äº’é€»è¾‘å®ç°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡
1. **å®‰è£… conda ç¯å¢ƒ**
   ```bash
   # æ£€æŸ¥æ˜¯å¦å·²æœ‰ pyside-env ç¯å¢ƒ
   conda env list
   
   # å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°ç¯å¢ƒ
   conda create -n pyside-env python=3.9
   conda activate pyside-env
   conda install pip
   ```

2. **å®‰è£… PySide6**
   ```bash
   conda activate pyside-env
   pip install PySide6>=6.6.0
   ```

### é¡¹ç›®è¿è¡Œ
```bash
# 1. æ¿€æ´»ç¯å¢ƒ
conda activate pyside-env

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/mold-surface-inspector

# 3. è¿è¡Œåº”ç”¨ç¨‹åº
python app.py

# æˆ–ä½¿ç”¨è¿è¡Œè„šæœ¬
./run.sh
```

### éªŒè¯å®‰è£…
è¿è¡Œååº”è¯¥çœ‹åˆ°ï¼š
- ä¸»çª—å£æ­£å¸¸æ˜¾ç¤º
- ä¸‰æ å¸ƒå±€æ¸…æ™°
- æŒ‰é’®å¯ä»¥ç‚¹å‡»
- æ§åˆ¶å°æ²¡æœ‰é”™è¯¯ä¿¡æ¯

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ¶æ„æ¦‚è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨ç¨‹åºå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ä¸»çª—å£     â”‚  â”‚   é…ç½®ç®¡ç†   â”‚  â”‚   æ ·å¼ç®¡ç†   â”‚    â”‚
â”‚  â”‚ MainWindow  â”‚  â”‚   Config    â”‚  â”‚   Styles    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æ•°æ®ç®¡ç†   â”‚  â”‚   æ–‡ä»¶å¤„ç†   â”‚  â”‚   è®¡ç®—é€»è¾‘   â”‚    â”‚
â”‚  â”‚ DataManager â”‚  â”‚ FileHandler â”‚  â”‚ Calculator  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç•Œé¢ç»„ä»¶å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   å·¦ä¾§é¢æ¿   â”‚  â”‚   ä¸­å¿ƒåŒºåŸŸ   â”‚  â”‚   å³ä¾§é¢æ¿   â”‚    â”‚
â”‚  â”‚ LeftPanel   â”‚  â”‚ CenterArea  â”‚  â”‚ RightPanel  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡æ¨¡å¼
- **MVCæ¨¡å¼**: åˆ†ç¦»ç•Œé¢ã€é€»è¾‘å’Œæ•°æ®
- **å•ä¾‹æ¨¡å¼**: é…ç½®ç®¡ç†å™¨
- **è§‚å¯Ÿè€…æ¨¡å¼**: ä¿¡å·æ§½æœºåˆ¶
- **å·¥å‚æ¨¡å¼**: ç»„ä»¶åˆ›å»º

## ğŸ“ ä»£ç ç»“æ„è¯¦è§£

### æ–‡ä»¶ç»„ç»‡
```
mold-surface-inspector/
â”œâ”€â”€ ğŸ“„ app.py                 # ğŸšª åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ ğŸ“„ main_window.py         # ğŸ  ä¸»çª—å£ç±»ï¼ˆæ ¸å¿ƒæ–‡ä»¶ï¼‰
â”œâ”€â”€ ğŸ“„ config.py              # âš™ï¸ é…ç½®ç®¡ç†
â”œâ”€â”€ ğŸ“„ styles.py              # ğŸ¨ æ ·å¼ç®¡ç†  
â”œâ”€â”€ ğŸ“„ data_manager.py        # ğŸ“Š æ•°æ®ç®¡ç†ï¼ˆé¢„ç•™ï¼‰
â”œâ”€â”€ ğŸ“„ test_functions.py      # ğŸ§ª åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ ğŸ“„ run.sh                 # ğŸ”§ è¿è¡Œè„šæœ¬
â”œâ”€â”€ ğŸ“„ requirements.txt       # ğŸ“¦ ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ FUNCTIONS.md           # ğŸ“– åŠŸèƒ½è¯´æ˜
â”œâ”€â”€ ğŸ“„ DEV_GUIDE.md           # ğŸ“š å¼€å‘æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ ğŸ“„ é¡µé¢ 1.html           # ğŸ–¼ï¸ UIåŸå‹å‚è€ƒ
â””â”€â”€ ğŸ“„ README.md             # ğŸ“‹ é¡¹ç›®è¯´æ˜
```

### æ ¸å¿ƒæ–‡ä»¶å…³ç³»
```mermaid
graph TD
    A[app.py] --> B[main_window.py]
    B --> C[config.py]
    B --> D[styles.py]
    B --> E[data_manager.py]
    C --> F[AppConfigç±»]
    D --> G[StyleManagerç±»]
    E --> H[DataManagerç±»]
```

## ğŸ§© æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. app.py - åº”ç”¨å…¥å£
```python
# æ–‡ä»¶ä½œç”¨ï¼šåº”ç”¨ç¨‹åºå¯åŠ¨å…¥å£
# ä»£ç è¡Œæ•°ï¼šçº¦10è¡Œ
# ä¸»è¦åŠŸèƒ½ï¼šå¯¼å…¥ä¸»çª—å£å¹¶å¯åŠ¨åº”ç”¨
```

**å…³é”®ä»£ç è§£æ**ï¼š
```python
from main_window import main  # å¯¼å…¥ä¸»å‡½æ•°
if __name__ == "__main__":
    main()  # å¯åŠ¨åº”ç”¨ç¨‹åº
```

### 2. main_window.py - ä¸»çª—å£ç±»ï¼ˆğŸ”¥æ ¸å¿ƒæ–‡ä»¶ï¼‰
```python
# æ–‡ä»¶ä½œç”¨ï¼šä¸»çª—å£ç±»å®ç°
# ä»£ç è¡Œæ•°ï¼šçº¦600è¡Œ
# ä¸»è¦åŠŸèƒ½ï¼šUIæ„å»ºã€äº¤äº’é€»è¾‘ã€äº‹ä»¶å¤„ç†
```

#### ç±»ç»“æ„å›¾
```
MainWindow
â”œâ”€â”€ __init__()           # åˆå§‹åŒ–
â”œâ”€â”€ init_ui()           # UIåˆå§‹åŒ–
â”œâ”€â”€ create_menu_bar()   # åˆ›å»ºèœå•æ 
â”œâ”€â”€ create_toolbar()    # åˆ›å»ºå·¥å…·æ 
â”œâ”€â”€ create_central_widget() # åˆ›å»ºä¸­å¤®éƒ¨ä»¶
â”‚   â”œâ”€â”€ create_left_panel()    # å·¦ä¾§é¢æ¿
â”‚   â”œâ”€â”€ create_center_panel()  # ä¸­å¿ƒé¢æ¿
â”‚   â””â”€â”€ create_right_panel()   # å³ä¾§é¢æ¿
â”œâ”€â”€ setup_connections() # ä¿¡å·è¿æ¥
â””â”€â”€ å ä½ç¬¦å‡½æ•°ç¾¤
    â”œâ”€â”€ load_model()         # åŠ è½½æ¨¡å‹
    â”œâ”€â”€ start_measurement()  # å¼€å§‹æµ‹é‡
    â”œâ”€â”€ pause_measurement()  # æš‚åœæµ‹é‡
    â”œâ”€â”€ stop_measurement()   # åœæ­¢æµ‹é‡
    â””â”€â”€ simulation_step()    # æ¨¡æ‹Ÿæ­¥éª¤
```

#### é‡è¦æ–¹æ³•è¯¦è§£

**UIåˆ›å»ºæ–¹æ³•**ï¼š
```python
def create_left_panel(self):
    """åˆ›å»ºå·¦ä¾§é¢æ¿ - æµ‹é‡è®¾ç½®ä¸æ§åˆ¶"""
    # è¿”å›ï¼šQFrameå¯¹è±¡
    # åŒ…å«ï¼šæ¨¡å‹ä¿¡æ¯ã€å‚æ•°è®¾ç½®ã€çŠ¶æ€ç›‘æ§
```

**äº¤äº’æ–¹æ³•**ï¼š
```python
def start_measurement(self):
    """å¼€å§‹æµ‹é‡åŠŸèƒ½"""
    # 1. è¯»å–å‚æ•°
    # 2. æ›´æ–°æŒ‰é’®çŠ¶æ€
    # 3. å¯åŠ¨å®šæ—¶å™¨
    # 4. æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨
```

### 3. config.py - é…ç½®ç®¡ç†
```python
# æ–‡ä»¶ä½œç”¨ï¼šé›†ä¸­ç®¡ç†åº”ç”¨é…ç½®
# è®¾è®¡æ¨¡å¼ï¼šç±»å±æ€§é…ç½®
# ä¸»è¦å†…å®¹ï¼šå°ºå¯¸ã€é¢œè‰²ã€å¸¸é‡
```

**é…ç½®ç±»ç»“æ„**ï¼š
```python
class AppConfig:
    # åº”ç”¨ä¿¡æ¯
    APP_NAME = "æ¨¡å…·æ›²é¢ç²¾åº¦åˆ†æç³»ç»Ÿ"
    APP_VERSION = "2.1"
    
    # ç•Œé¢å°ºå¯¸
    WINDOW_WIDTH = 1440
    WINDOW_HEIGHT = 900
    
    # é¢œè‰²é…ç½®
    COLORS = {
        'error_positive_high': '#ef4444',
        'error_normal': '#10b981',
        # ...
    }
```

### 4. styles.py - æ ·å¼ç®¡ç†
```python
# æ–‡ä»¶ä½œç”¨ï¼šQSSæ ·å¼è¡¨ç®¡ç†
# è®¾è®¡æ€è·¯ï¼šé›†ä¸­åŒ–æ ·å¼ç®¡ç†
# æ ·å¼è¦†ç›–ï¼šæŒ‰é’®ã€è¡¨æ ¼ã€é¢æ¿ç­‰
```

**æ ·å¼ç®¡ç†å™¨ç»“æ„**ï¼š
```python
class StyleManager:
    @staticmethod
    def get_main_stylesheet():
        """è¿”å›å®Œæ•´çš„QSSæ ·å¼è¡¨"""
        
    @staticmethod  
    def get_color_block_style(color):
        """ç”Ÿæˆé¢œè‰²å—æ ·å¼"""
```

### 5. data_manager.py - æ•°æ®ç®¡ç†ï¼ˆé¢„ç•™ï¼‰
```python
# æ–‡ä»¶ä½œç”¨ï¼šæ•°æ®å¤„ç†å’Œç®¡ç†
# å½“å‰çŠ¶æ€ï¼šå·²å®ç°åŸºç¡€ç»“æ„ï¼Œæœªåœ¨ä¸»ç¨‹åºä¸­ä½¿ç”¨
# æ‰©å±•ç”¨é€”ï¼šçœŸå®æ•°æ®å¤„ç†ã€æ–‡ä»¶I/Oã€è®¡ç®—é€»è¾‘
```

## ğŸ–¥ï¸ ç•Œé¢ç»„ä»¶æ˜ å°„

### ç»„ä»¶å±‚çº§ç»“æ„
```
QMainWindow (ä¸»çª—å£)
â”œâ”€â”€ QMenuBar (èœå•æ )
â”œâ”€â”€ QToolBar (å·¥å…·æ ) 
â””â”€â”€ QWidget (ä¸­å¤®éƒ¨ä»¶)
    â””â”€â”€ QHBoxLayout (æ°´å¹³å¸ƒå±€)
        â”œâ”€â”€ QFrame (å·¦ä¾§é¢æ¿, 320px)
        â”‚   â”œâ”€â”€ ç†è®ºæ¨¡å‹ä¿¡æ¯ç»„
        â”‚   â”œâ”€â”€ æµ‹é‡å‚æ•°è®¾ç½®ç»„  
        â”‚   â””â”€â”€ å®æ—¶çŠ¶æ€ç›‘æ§ç»„
        â”œâ”€â”€ QFrame (ä¸­å¿ƒé¢æ¿, è‡ªé€‚åº”)
        â”‚   â”œâ”€â”€ QWidget (3Då¯è§†åŒ–å ä½ç¬¦)
        â”‚   â””â”€â”€ QTableWidget (æ•°æ®è¡¨æ ¼)
        â””â”€â”€ QFrame (å³ä¾§é¢æ¿, 320px)
            â”œâ”€â”€ é¢œè‰²å›¾ä¾‹ç»„
            â”œâ”€â”€ è¯¯å·®ç»Ÿè®¡ç»„
            â””â”€â”€ å›¾è¡¨å ä½ç¬¦ç»„
```

### å…³é”®ç»„ä»¶å¼•ç”¨
åœ¨ `MainWindow` ç±»ä¸­ï¼Œé‡è¦ç»„ä»¶éƒ½æœ‰å®ä¾‹å¼•ç”¨ï¼š

```python
class MainWindow(QMainWindow):
    def __init__(self):
        # å·¥å…·æ æŒ‰é’®
        self.load_model_btn = QPushButton("ğŸ“ åŠ è½½æ¨¡å‹")
        self.start_measure_btn = QPushButton("â–¶ å¼€å§‹æµ‹é‡")
        self.pause_btn = QPushButton("â¸ æš‚åœ")
        self.stop_btn = QPushButton("â¹ åœæ­¢")
        
        # è¾“å…¥æ¡†
        self.x_min_input = QLineEdit()
        self.x_max_input = QLineEdit()
        self.x_step_input = QLineEdit()
        self.rot_step_input = QLineEdit()
        
        # æ˜¾ç¤ºæ ‡ç­¾
        self.current_x_label = QLabel()
        self.current_angle_label = QLabel()
        self.status_text = QLabel()
        
        # è¡¨æ ¼
        self.data_table = QTableWidget()
```

### ä¿¡å·æ§½è¿æ¥
æ‰€æœ‰äº¤äº’ç»„ä»¶éƒ½é€šè¿‡ä¿¡å·æ§½æœºåˆ¶è¿æ¥åˆ°å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼š

```python
def setup_connections(self):
    """è®¾ç½®ä¿¡å·è¿æ¥"""
    self.load_model_btn.clicked.connect(self.load_model)
    self.start_measure_btn.clicked.connect(self.start_measurement)
    self.pause_btn.clicked.connect(self.pause_measurement)
    self.stop_btn.clicked.connect(self.stop_measurement)
    # ...
```

## ğŸ“Š æ•°æ®æµç¨‹

### æµ‹é‡æµç¨‹å›¾
```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant UI as ç•Œé¢
    participant Logic as ä¸šåŠ¡é€»è¾‘
    participant Timer as å®šæ—¶å™¨
    participant Data as æ•°æ®å±‚
    
    User->>UI: ç‚¹å‡»"å¼€å§‹æµ‹é‡"
    UI->>Logic: start_measurement()
    Logic->>Logic: read_measurement_parameters()
    Logic->>UI: æ›´æ–°æŒ‰é’®çŠ¶æ€
    Logic->>Timer: å¯åŠ¨å®šæ—¶å™¨
    
    loop æ¯ç§’æ‰§è¡Œ
        Timer->>Logic: simulation_step()
        Logic->>Data: ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
        Data->>Logic: è¿”å›æµ‹é‡ç‚¹
        Logic->>UI: add_table_row()
        Logic->>UI: update_statistics()
        Logic->>UI: update_real_time_status()
    end
    
    User->>UI: ç‚¹å‡»"åœæ­¢"
    UI->>Logic: stop_measurement()
    Logic->>Timer: åœæ­¢å®šæ—¶å™¨
    Logic->>UI: é‡ç½®çŠ¶æ€
```

### æ•°æ®ç»“æ„
```python
# æµ‹é‡ç‚¹æ•°æ®ç»“æ„
@dataclass
class MeasurementPoint:
    sequence: int           # åºå·
    x_coord: float         # Xåæ ‡
    angle: float           # è§’åº¦
    measured_value: float  # æµ‹é‡å€¼
    theoretical_value: float # ç†è®ºå€¼
    error: float           # è¯¯å·®
    status: str            # çŠ¶æ€

# ç»Ÿè®¡æ•°æ®ç»“æ„
statistics = {
    'max_error': float,        # æœ€å¤§è¯¯å·®
    'min_error': float,        # æœ€å°è¯¯å·®
    'avg_error': float,        # å¹³å‡è¯¯å·®
    'std_error': float,        # æ ‡å‡†å·®
    'total_points': int,       # æ€»ç‚¹æ•°
    'qualified_points': int,   # åˆæ ¼ç‚¹æ•°
}
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
1. **å‘½åè§„èŒƒ**
   ```python
   # ç±»åï¼šå¤§é©¼å³°
   class MainWindow(QMainWindow):
   
   # æ–¹æ³•åï¼šä¸‹åˆ’çº¿
   def create_left_panel(self):
   
   # å˜é‡åï¼šä¸‹åˆ’çº¿
   self.current_x_label = QLabel()
   
   # å¸¸é‡ï¼šå…¨å¤§å†™
   WINDOW_WIDTH = 1440
   ```

2. **æ³¨é‡Šè§„èŒƒ**
   ```python
   def create_toolbar(self):
       """åˆ›å»ºå·¥å…·æ """  # æ–¹æ³•è¯´æ˜
       
   # å·¥å…·æ æŒ‰é’®ç»„
   self.load_model_btn = QPushButton("ğŸ“ åŠ è½½æ¨¡å‹")  # è¡Œå†…æ³¨é‡Š
   ```

3. **æ–‡ä»¶ç»„ç»‡**
   - æ¯ä¸ªæ–‡ä»¶å¼€å¤´åŒ…å«ç¼–ç å’Œæè¿°
   - å¯¼å…¥è¯­å¥åˆ†ç»„ï¼ˆæ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹ã€æœ¬åœ°ï¼‰
   - ç±»å’Œå‡½æ•°ä¹‹é—´ç©ºä¸¤è¡Œ

### Qt/PySide6 ä½¿ç”¨è§„èŒƒ

1. **ç»„ä»¶å‘½å**
   ```python
   # å¥½çš„å‘½åï¼šä½“ç°ç”¨é€”
   self.start_measure_btn = QPushButton()
   self.data_table = QTableWidget()
   
   # ä¸æ¨èï¼šåªæœ‰ç±»å‹
   self.button1 = QPushButton()
   self.table = QTableWidget()
   ```

2. **ä¿¡å·è¿æ¥**
   ```python
   # é›†ä¸­åœ¨ setup_connections() æ–¹æ³•ä¸­
   def setup_connections(self):
       self.button.clicked.connect(self.handler)
   ```

3. **æ ·å¼åº”ç”¨**
   ```python
   # ä½¿ç”¨ ObjectName + QSS
   button.setObjectName("primaryButton")
   # åœ¨ QSS ä¸­å®šä¹‰æ ·å¼
   """
   QPushButton#primaryButton {
       background-color: #2563eb;
   }
   """
   ```

### é”™è¯¯å¤„ç†è§„èŒƒ
```python
def read_measurement_parameters(self):
    """å‚æ•°è¯»å–ç¤ºä¾‹"""
    try:
        x_min = float(self.x_min_input.text())
        # ... å¤„ç†é€»è¾‘
    except ValueError as e:
        print(f"å‚æ•°è¯»å–é”™è¯¯: {e}")
        QMessageBox.warning(self, "å‚æ•°é”™è¯¯", "è¯·æ£€æŸ¥è¾“å…¥å‚æ•°")
```

## ğŸ”§ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½çš„æ­¥éª¤

#### 1. æ·»åŠ æ–°çš„UIç»„ä»¶
```python
def create_new_group(self):
    """åˆ›å»ºæ–°åŠŸèƒ½ç»„"""
    group_widget = QWidget()
    layout = QVBoxLayout(group_widget)
    
    # æ·»åŠ æ ‡é¢˜
    title = QLabel("æ–°åŠŸèƒ½")
    title.setObjectName("groupTitle")
    layout.addWidget(title)
    
    # æ·»åŠ æ§ä»¶
    new_button = QPushButton("æ–°æŒ‰é’®")
    new_button.setObjectName("primaryButton")
    layout.addWidget(new_button)
    
    # ä¿å­˜å¼•ç”¨ç”¨äºåç»­æ“ä½œ
    self.new_button = new_button
    
    return group_widget
```

#### 2. æ·»åŠ ä¿¡å·è¿æ¥
```python
def setup_connections(self):
    # ...existing connections...
    self.new_button.clicked.connect(self.new_function)
```

#### 3. å®ç°åŠŸèƒ½é€»è¾‘
```python
def new_function(self):
    """æ–°åŠŸèƒ½å®ç°"""
    print("=== æ–°åŠŸèƒ½æ‰§è¡Œ ===")
    
    # è¯»å–ç”¨æˆ·è¾“å…¥
    # æ‰§è¡Œä¸šåŠ¡é€»è¾‘  
    # æ›´æ–°ç•Œé¢æ˜¾ç¤º
    # é”™è¯¯å¤„ç†
    
    QMessageBox.information(self, "æç¤º", "æ–°åŠŸèƒ½æ‰§è¡Œå®Œæˆ")
```

#### 4. æ·»åŠ é…ç½®é¡¹
```python
# åœ¨ config.py ä¸­
class AppConfig:
    # æ–°åŠŸèƒ½ç›¸å…³é…ç½®
    NEW_FEATURE_ENABLED = True
    NEW_FEATURE_TIMEOUT = 5000
```

#### 5. æ·»åŠ æ ·å¼
```python
# åœ¨ styles.py ä¸­
def get_main_stylesheet(self):
    return """
    /* ...existing styles... */
    
    /* æ–°åŠŸèƒ½æ ·å¼ */
    QPushButton#newFeatureButton {
        background-color: #8b5cf6;
        color: white;
    }
    """
```

### å¸¸è§æ‰©å±•åœºæ™¯

#### åœºæ™¯1ï¼šæ·»åŠ æ–°çš„æ•°æ®å¯¼å…¥åŠŸèƒ½
1. **UIæ‰©å±•**ï¼šåœ¨å·¦ä¾§é¢æ¿æ·»åŠ "å¯¼å…¥æ•°æ®"æŒ‰é’®
2. **åŠŸèƒ½å®ç°**ï¼šä½¿ç”¨`QFileDialog`é€‰æ‹©æ•°æ®æ–‡ä»¶
3. **æ•°æ®å¤„ç†**ï¼šè§£ææ–‡ä»¶å†…å®¹å¹¶å¡«å……åˆ°è¡¨æ ¼
4. **é”™è¯¯å¤„ç†**ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯å’Œé”™è¯¯æç¤º

#### åœºæ™¯2ï¼šæ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½  
1. **UIæ‰©å±•**ï¼šåœ¨å·¥å…·æ æ·»åŠ "å¯¼å‡ºæŠ¥å‘Š"æŒ‰é’®
2. **åŠŸèƒ½å®ç°**ï¼šæ”¶é›†å½“å‰æ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯
3. **æ–‡ä»¶ç”Ÿæˆ**ï¼šç”ŸæˆExcelæˆ–PDFæŠ¥å‘Š
4. **ç”¨æˆ·åé¦ˆ**ï¼šæ˜¾ç¤ºå¯¼å‡ºæˆåŠŸæç¤º

#### åœºæ™¯3ï¼šæ·»åŠ 3Då¯è§†åŒ–
1. **ä¾èµ–å®‰è£…**ï¼šæ·»åŠ 3Då›¾å½¢åº“ï¼ˆå¦‚matplotlibã€pyqtgraphï¼‰
2. **UIæ›¿æ¢**ï¼šæ›¿æ¢ä¸­å¿ƒåŒºåŸŸçš„å ä½ç¬¦
3. **æ•°æ®ç»‘å®š**ï¼šå°†æµ‹é‡æ•°æ®æ˜ å°„åˆ°3Då›¾å½¢
4. **äº¤äº’æ§åˆ¶**ï¼šæ·»åŠ è§†å›¾æ§åˆ¶åŠŸèƒ½

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### 1. å¤§æ•°æ®é‡å¤„ç†
```python
def add_table_row_optimized(self, data):
    """ä¼˜åŒ–çš„è¡¨æ ¼æ·»åŠ æ–¹æ³•"""
    # é™åˆ¶æ˜¾ç¤ºè¡Œæ•°
    max_rows = 1000
    if self.data_table.rowCount() > max_rows:
        self.data_table.removeRow(0)
    
    # æ‰¹é‡æ›´æ–°
    self.data_table.insertRow(self.data_table.rowCount())
    # ... æ·»åŠ æ•°æ®
```

#### 2. ç•Œé¢å“åº”æ€§
```python
def long_running_task(self):
    """é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡"""
    # ä½¿ç”¨ QThread é¿å…ç•Œé¢å¡é¡¿
    from PySide6.QtCore import QThread
    
    worker = QThread()
    # å°†ä»»åŠ¡ç§»åˆ°åå°çº¿ç¨‹
```

## â“ å¸¸è§é—®é¢˜

### å¼€å‘ç¯å¢ƒé—®é¢˜

**Q1: æç¤º PySide6 æ¨¡å—æ‰¾ä¸åˆ°**
```bash
# è§£å†³æ–¹æ¡ˆ
conda activate pyside-env
pip install PySide6
```

**Q2: ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸**
```python
# æ£€æŸ¥æ ·å¼è¡¨æ˜¯å¦æ­£ç¡®åŠ è½½
def setup_style(self):
    style = StyleManager.get_main_stylesheet()
    print("æ ·å¼é•¿åº¦:", len(style))  # è°ƒè¯•è¾“å‡º
    self.setStyleSheet(style)
```

**Q3: ä¿¡å·æ§½è¿æ¥å¤±è´¥**
```python
# ç¡®ä¿åœ¨å¯¹è±¡åˆ›å»ºåè¿æ¥
def setup_connections(self):
    # æ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨
    if hasattr(self, 'start_measure_btn'):
        self.start_measure_btn.clicked.connect(self.start_measurement)
```

### åŠŸèƒ½æ‰©å±•é—®é¢˜

**Q4: å¦‚ä½•æ·»åŠ æ–°çš„é…ç½®é¡¹ï¼Ÿ**
1. åœ¨ `config.py` ä¸­æ·»åŠ é…ç½®å¸¸é‡
2. åœ¨éœ€è¦çš„åœ°æ–¹å¼•ç”¨ `AppConfig.NEW_CONFIG`
3. å¦‚æœæ˜¯ç”¨æˆ·å¯é…ç½®çš„ï¼Œè€ƒè™‘æ·»åŠ è®¾ç½®ç•Œé¢

**Q5: å¦‚ä½•å¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„ï¼Ÿ**
1. ä½¿ç”¨ `dataclass` å®šä¹‰æ•°æ®ç»“æ„
2. åœ¨ `data_manager.py` ä¸­å®ç°æ•°æ®å¤„ç†é€»è¾‘
3. é€šè¿‡ä¿¡å·æ§½æœºåˆ¶æ›´æ–°ç•Œé¢

**Q6: å¦‚ä½•è°ƒè¯•ç•Œé¢å¸ƒå±€é—®é¢˜ï¼Ÿ**
```python
# æ·»åŠ è°ƒè¯•è¾¹æ¡†
widget.setStyleSheet("border: 1px solid red;")

# æ‰“å°å°ºå¯¸ä¿¡æ¯
print(f"Widget size: {widget.size()}")
```

### éƒ¨ç½²å’Œåˆ†å‘

**Q7: å¦‚ä½•æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Ÿ**
```bash
# ä½¿ç”¨ PyInstaller
pip install pyinstaller
pyinstaller --onefile --windowed app.py
```

**Q8: å¦‚ä½•å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„å…¼å®¹æ€§ï¼Ÿ**
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- é¿å…ç³»ç»Ÿç‰¹å®šçš„API
- æµ‹è¯•å¤šä¸ªå¹³å°

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [PySide6 å®˜æ–¹æ–‡æ¡£](https://doc.qt.io/qtforpython/)
- [Qt Style Sheets å‚è€ƒ](https://doc.qt.io/qt-6/stylesheet-reference.html)

### å­¦ä¹ èµ„æº
- [Qt Designer æ•™ç¨‹](https://doc.qt.io/qt-6/qtdesigner-manual.html)
- [Python GUI ç¼–ç¨‹æœ€ä½³å®è·µ](https://realpython.com/python-gui-programming/)

### ç¤¾åŒºæ”¯æŒ
- [Qt Forum](https://forum.qt.io/)
- [Stack Overflow - PySide6 æ ‡ç­¾](https://stackoverflow.com/questions/tagged/pyside6)

---

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

å¦‚æœæ‚¨è¦å¯¹æ­¤é¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œè¯·éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

1. **ç†è§£ç°æœ‰æ¶æ„**ï¼šä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£å’Œä»£ç æ³¨é‡Š
2. **è®¾ç½®å¼€å‘ç¯å¢ƒ**ï¼šæŒ‰ç…§å¿«é€Ÿå¼€å§‹æŒ‡å—é…ç½®ç¯å¢ƒ
3. **åŠŸèƒ½è®¾è®¡**ï¼šåœ¨å®ç°å‰å…ˆè®¾è®¡åŠŸèƒ½æ¶æ„
4. **æ¸è¿›å¼å¼€å‘**ï¼šå°æ­¥éª¤è¿­ä»£ï¼ŒåŠæ—¶æµ‹è¯•
5. **æ–‡æ¡£æ›´æ–°**ï¼šä¿®æ”¹ä»£ç åæ›´æ–°ç›¸å…³æ–‡æ¡£

**è”ç³»æ–¹å¼**ï¼š
- æŠ€æœ¯è®¨è®ºï¼š[åœ¨æ­¤æ·»åŠ è”ç³»æ–¹å¼]
- é—®é¢˜åé¦ˆï¼š[åœ¨æ­¤æ·»åŠ Issueåœ°å€]

---

*æœ¬æ–‡æ¡£æœ€åæ›´æ–°ï¼š2025å¹´8æœˆ9æ—¥*
