# 模具曲面精度分析系统

一个基于 Python 和 PySide6 开发的桌面应用程序，用于加载理论CAD模型信息和实时测量数据，通过对比分析两者差异来计算和可视化模具的表面精度误差。

## 🖼️ 系统界面

![模具曲面精度分析系统界面](../figures/UI_with_display_pointcloud.png)

*系统主界面展示了完整的三栏布局设计：*
- **左侧面板**: 理论模型信息、测量参数设置、实时状态监控
- **中央区域**: 3D可视化窗口和实时数据表格
- **右侧面板**: 颜色图例、误差统计分析、误差分布图表

## 功能特性

- **理论模型管理**: 支持加载CSV格式的理论点云数据文件
- **硬件模拟测量**: 通过 `HardwareSimulator` 类模拟测量设备的数据采集过程
- **实时误差分析**: 使用 `AnalysisWorker` 线程实时计算测量误差和统计数据  
- **3D数据可视化**: 实时显示理论点云和测量点的3D分布图
- **统计图表**: 提供误差分布直方图和实时统计数据更新
- **多线程架构**: 使用QThread实现非阻塞的数据处理和界面更新
- **现代化界面**: 采用PySide6和QSS样式，界面美观易用

## 系统要求

- Python 3.8+
- PySide6 6.6.0+
- numpy >= 1.21.0
- pandas >= 1.3.0
- matplotlib >= 3.5.0
- macOS / Windows / Linux

## 环境准备

推荐使用 conda 环境管理器：

```bash
# 创建专用环境
conda create -n pyside-env python=3.9

# 激活环境
conda activate pyside-env

# 安装依赖
pip install -r requirements.txt
```

## 安装和运行
### 环境要求

- Python 3.8+
- conda 环境管理器
- 已创建的 pyside-env 环境，包含 PySide6

### 1. 激活 conda 环境

```bash
conda activate pyside-env
```

### 2. 安装依赖（如果需要）

```bash
pip install -r requirements.txt
```

### 3. 运行应用程序

```bash
python app.py
```

或者使用提供的运行脚本：

```bash
./run.sh
```

或者直接运行主窗口模块：

```bash
python main_window.py
```

## 📚 完整文档导航

本项目提供了完整的开发文档体系，帮助不同需求的开发者快速上手：

### 🎯 新手必读
- **[⚡ 快速上手指南](QUICK_START.md)** - 15分钟快速了解项目
- **[🏠 项目功能说明](FUNCTIONS.md)** - 详细的功能特性介绍

### 🔧 开发人员
- **[📚 完整开发文档](DEV_GUIDE.md)** - 全面的开发指南和规范
- **[📖 API 参考手册](API_REFERENCE.md)** - 详细的类和方法说明
- **[🏗️ 技术架构文档](ARCHITECTURE.md)** - 系统架构和设计决策

### 📁 文档结构
```
📚 文档系统
├── 📋 README.md          # 项目总览（当前文件）
├── ⚡ QUICK_START.md     # 快速上手（15分钟）
├── 🏠 FUNCTIONS.md       # 功能说明
├── 📚 DEV_GUIDE.md       # 开发指南（完整版）
├── 📖 API_REFERENCE.md   # API参考手册
└── 🏗️ ARCHITECTURE.md    # 技术架构文档
```

### 🎯 按需阅读建议

| 你的角色 | 推荐阅读顺序 |
|---------|-------------|
| **新接手开发者** | README → QUICK_START → DEV_GUIDE → API_REFERENCE |
| **功能了解者** | README → FUNCTIONS |
| **架构设计者** | README → ARCHITECTURE → DEV_GUIDE |
| **API使用者** | API_REFERENCE → QUICK_START |

```
mold-surface-inspector/
├── app.py                 # 应用程序启动入口
├── main_window.py         # 主窗口类实现（包含所有交互功能）
├── config.py              # 配置管理模块
├── styles.py              # QSS样式管理模块  
├── data_manager.py        # 数据管理模块
├── test_functions.py      # 功能测试脚本
├── run.sh                 # 便捷运行脚本
├── requirements.txt       # 项目依赖
├── FUNCTIONS.md           # 功能详细说明文档
├── 页面 1.html           # UI原型参考
└── README.md             # 项目说明文档
```

## 界面功能

### 主窗口布局

- **菜单栏**: 文件、视图、工具、帮助等菜单
- **工具栏**: 常用功能按钮（加载模型、开始测量等）
- **三栏布局**:
  - **左侧面板**: 理论模型信息、测量参数设置、实时状态监控
  - **中心区域**: 3D可视化窗口、实时数据表格
  - **右侧面板**: 颜色图例、误差统计、分布图表

### 主要功能模块

1. **CAD模型管理**
   - 支持加载 CAD 文件（.step, .stp, .iges, .igs, .stl）
   - 显示模型基本信息和参数范围
   - 文件路径控制台输出

2. **测量过程控制** ⭐
   - 开始/暂停/停止测量功能
   - 智能按钮状态管理
   - 实时状态指示器
   - 测量参数读取和验证

3. **实时数据模拟** ⭐
   - 自动生成模拟测量数据
   - 实时更新数据表格
   - 自动滚动到最新数据
   - 状态颜色编码（合格/注意/超差）

4. **统计分析** ⭐
   - 实时计算最大/最小/平均误差
   - 标准差统计
   - 进度监控
   - 颜色编码图例

5. **用户界面交互**
   - 完整的信号槽连接
   - 友好的消息提示
   - 参数输入验证
   - 响应式按钮状态

## 技术特点

### 核心架构
- **多线程架构**: 使用 QThread 实现硬件模拟和误差分析的并行处理
- **信号槽机制**: 基于 Qt 信号槽实现组件间的松耦合通信
- **模块化设计**: 清晰的功能模块划分，代码结构良好

### 数据处理能力
- **实时数据流**: CSV文件监控和实时数据处理流水线
- **坐标转换**: 支持柱坐标与笛卡尔坐标的精确转换
- **误差分析**: 实时计算统计指标（最大/最小/平均误差、标准差等）
- **数据缓存**: 高效的数据缓存和查找机制

### 可视化功能
- **3D可视化**: 集成 matplotlib 实现理论点云和测量点的3D显示
- **实时图表**: 误差分布直方图和统计数据的实时更新
- **响应式布局**: 支持窗口大小调整和界面自适应

### 用户体验
- **现代化样式**: 使用 QSS 样式表实现美观的界面设计
- **完整中文支持**: 界面完全支持中文显示和注释
- **友好交互**: 直观的操作流程和状态反馈

## 开发说明

本项目采用 PySide6 框架开发，精确复刻了原型设计的界面布局和样式。代码结构清晰，注释详细，便于后续功能扩展和维护。

### 主要技术栈

- **GUI框架**: PySide6
- **编程语言**: Python 3.8+
- **样式系统**: Qt Style Sheets (QSS)
- **布局管理**: QHBoxLayout, QVBoxLayout, QGridLayout

## 许可证

本项目采用 MIT 许可证，详情请查看 LICENSE 文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 邮箱: [your-email@example.com]
- 项目地址: [GitHub Repository URL]
